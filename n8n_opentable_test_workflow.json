{
  "name": "OpenTable Scraper - Final",
  "nodes": [
    {
      "parameters": {},
      "id": "27018783-a079-4469-bc2a-1c7c9135e808",
      "name": "Start",
      "type": "n8n-nodes-base.start",
      "typeVersion": 1,
      "position": [
        240,
        300
      ]
    },
    {
      "parameters": {
        "url": "https://app.scrapingbee.com/api/v1/?api_key=PE0EL019IKOKWT8MID15O5HQYGEPDC9FT6EQZK8DKJ7RBLP15MGGTOB8YQQMAKFGAD8Q1VA9RRTNIPK5&url=https%3A%2F%2Fwww.opentable.com%2Fs%2F%3Fk%3Dnew%2520york",
        "options": {
          "response": {
            "response": {
              "fullResponse": false,
              "responseFormat": "file"
            }
          }
        }
      },
      "id": "8482a524-76e3-4d43-9828-569a988185c0",
      "name": "Fetch via ScrapingBee",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        460,
        300
      ]
    },
    {
      "parameters": {
        "jsCode": "const cheerio = require('cheerio');\n\n// Get the binary data object from the input.\n// n8n places binary files in the .binary property of an item.\nconst binaryData = items[0].binary.data;\n\n// Decode the base64 data into a buffer\nconst buffer = Buffer.from(binaryData, 'base64');\n\n// Convert the buffer to a UTF-8 string\nconst html = buffer.toString('utf-8');\n\nconst $ = cheerio.load(html);\n\nconst nameSelector = \"h3[data-test='restaurant-card-name']\";\nconst linkSelector = \"a[data-test='restaurant-card-link']\";\nconst cuisineSelector = \"span[data-test='restaurant-card-cuisine-info']\";\nconst imageSelector = \"img[data-test='restaurant-card-image']\";\n\nconst results = [];\n\nconst names = $(nameSelector);\n\nnames.each((index, element) => {\n  const name = $(element).text();\n  const link = $(linkSelector).eq(index).attr('href');\n  const cuisine = $(cuisineSelector).eq(index).text();\n  const imageUrl = $(imageSelector).eq(index).attr('src');\n\n  results.push({\n    name: name,\n    link: link,\n    cuisine: cuisine,\n    imageUrl: imageUrl\n  });\n});\n\nreturn results;"
      },
      "id": "c61b179d-9c24-42b7-8ccb-a3d827f37ccb",
      "name": "Extract Info with Code",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        680,
        300
      ]
    }
  ],
  "connections": {
    "Start": {
      "main": [
        [
          {
            "node": "Fetch via ScrapingBee",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch via ScrapingBee": {
      "main": [
        [
          {
            "node": "Extract Info with Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {}
} 